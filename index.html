<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soundmap Artist Guesser Solver</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="manifest" href="https://catninja58.github.io/SoundmapSolver/manifest.json">
    <style>
        /* General body styles */
        body {
            font-family: Arial, sans-serif; /* Set font family */
            text-align: center; /* Center align text */
            margin: 0; /* Remove default margin */
            padding: 0; /* Remove default padding */
            display: flex; /* Use flexbox layout */
            flex-direction: column; /* Arrange children in a column */
            align-items: center; /* Center align items horizontally */
            justify-content: flex-start; /* Align items to the top */
            background-color: #121212; /* Background color */
        }
        
        /* Heading styles */
        h1 {
            margin-top: 20px; /* Add top margin */
            color: #f4f4f4; /* Heading color */
        }
        
        /* Input field styles */
        input {
            margin-top: 20px; /* Add top margin */
            padding: 10px; /* Add padding */
            font-size: 14px; /* Set font size */
            width: 300px; /* Set width */
            background-color: #1c1c1c; /* Input background color */
            color: #f4f4f4; /* Input text color */
            border: none; /* Remove border */
        }
        
        /* Button container styles */
        .button-container {
            display: grid; /* Use grid layout */
            grid-template-columns: repeat(3, 1fr); /* 3 equal columns */
            gap: 5px; /* Gap between grid items */
            margin-top: 20px; /* Add top margin */
            height: auto; /* Auto height for guess boxes */
        }
        
        /* Button styles */
        button {
            width: 250px; /* Fixed width for buttons */
            height: 50px; /* Fixed height for buttons */
            font-size: 14px; /* Set font size */
            background-color: #1c1c1c; /* Button background color */
            color: #f4f4f4; /* Button text color */
            border: none; /* Remove border */
            overflow: hidden; /* Hide overflow text */
            text-overflow: ellipsis; /* Add ellipsis for overflow text */
        }
        
        /* Correct option color */
        .green {
            background-color: #159643; /* Correct option color */
        }
        
        /* Close option color */
        .orange {
            background-color: #b19600; /* Close option color */
        }
        
        /* Wrong option color */
        .grey {
            background-color: grey; /* Wrong option color */
        }
        
        /* Results container styles */
        .results-container {
            width: 80%; /* Set width */
            margin-top: 40px; /* Add top margin */
            padding: 10px; /* Add padding */
            border-top: 2px solid #000; /* Top border */
            display: flex; /* Use flexbox layout */
            flex-direction: column; /* Arrange children in a column */
            align-items: center; /* Center align items horizontally */
        }
        
        /* Artist list wrapper styles */
        .artist-list-wrapper {
            width: 100%; /* Set width */
            overflow-x: auto; /* Enable horizontal scrolling */
        }
        
        /* Table styles */
        table {
            width: 100%; /* Set width */
            border-collapse: collapse; /* Collapse borders */
        }
        
        /* Table header and cell styles */
        th, td {
            padding: 8px; /* Add padding */
            border-bottom: 1px solid #ddd; /* Bottom border */
            color: #f4f4f4; /* Text color */
            text-align: left; /* Left align text */
            word-wrap: break-word; /* Allow word wrapping */
        }
        
        /* Table header styles */
        th {
            font-weight: bold; /* Bold text */
        }
        
        /* Dropdown styles */
        select {
            margin-top: 10px; /* Add top margin */
            padding: 5px; /* Add padding */
            font-size: 14px; /* Set font size */
            position: absolute; /* Absolute positioning */
            z-index: 10; /* Set z-index */
        }
        
        /* Button text styles */
        .button-text {
            display: inline-block; /* Inline block display */
            margin-bottom: 5px; /* Add bottom margin */
        }
        
        /* Guess container styles */
        .guess-container {
            margin-top: 20px; /* Add top margin */
            width: 80%; /* Set width */
            display: flex; /* Use flexbox layout */
            flex-direction: column; /* Arrange children in a column */
            align-items: center; /* Center align items horizontally */
            color: #f4f4f4 !important;
        }
        
        /* Guess title styles */
        .guess-title {
            font-weight: bold; /* Bold text */
            margin-top: 40px; /* Add top margin */
            margin-bottom: 10px; /* Add bottom margin to prevent overlap */
            color: #88888a; /* Guess title color */
        }

        /* Guess artist styles */
        .guess-artist {
            margin-top: 10px; /* Add top margin */
            margin-bottom: 20px; /* Add bottom margin */
            color: #f4f4f4 !important; /* Artist name color */
        }

        /* Guess boxes styles */
        .guess-boxes {
            margin-top: 20px; /* Add top margin */
            margin-bottom: 5px; /* Add bottom margin */
            display: grid; /* Use grid layout */
            grid-template-columns: repeat(3, 1fr); /* 3 equal columns */
            gap: 5px; /* Gap between grid items */
        }

        /* Last guess box styles */
        .guess-boxes:last-child {
            margin-bottom: 20px; /* Add bottom margin */
        }
        
        /* Footer text styles */
        .footer-text {
            font-weight: bold; /* Bold text */
            margin-top: 20px; /* Add top margin */
            color: #f4f4f4; /* Footer text color */
        }
        
        /* Mobile version styles */
        @media (max-width: 800px) { 
            body {
            justify-content: center; /* Center align items vertically */
            }

            input {
            width: 90%; /* Set width */
            }
        
            .results-container {
            width: 100%; /* Set width */
            }
        
            .guess-container {
            width: 100%; /* Set width */
            align-items: center; /* Center align items horizontally */
            }
        
            .artist-list-wrapper {
            overflow-x: auto; /* Enable horizontal scrolling */
            }

            .button-container {
            grid-template-columns: repeat(3, 1fr); /* 3 equal columns */
            gap: 2px; /* Gap between grid items */
            justify-items: center; /* Center align grid items */
            width: 100%; /* Set width to 100% */
            }

            button {
            width: 90%; /* Set width */
            font-size: 11px; /* Set font size */
            }
        }

        /* Modal styles */
        .hidden {
            display: none;
        }

        .modal {
            display: none; /* Hide modal by default */
            position: fixed; /* Fixed positioning */
            z-index: 1000; /* Set z-index */
            left: 0; /* Align to left */
            top: 0; /* Align to top */
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scrolling */
            background-color: rgba(0, 0, 0, 0.4); /* Modal background color */
        }

        .modal-content {
            background-color: #fefefe; /* Modal content background color */
            margin: 15% auto; /* Center align */
            padding: 20px; /* Add padding */
            border: 1px solid #888; /* Border */
            width: 80%; /* Set width */
            max-width: 300px; /* Max width */
        }

        .close {
            color: #aaa; /* Close button color */
            float: right; /* Float to right */
            font-size: 28px; /* Set font size */
            font-weight: bold; /* Bold text */
        }

        .close:hover,
        .close:focus {
            color: black; /* Close button hover color */
            text-decoration: none; /* Remove text decoration */
            cursor: pointer; /* Pointer cursor */
        }

        .modal-option {
            margin: 10px 0; /* Add vertical margin */
            padding: 10px; /* Add padding */
            background-color: #ddd; /* Modal option background color */
            cursor: pointer; /* Pointer cursor */
        }

        .modal-option:hover {
            background-color: #ccc; /* Modal option hover color */
        }
        
        /* Search result styles */
        #searchResults div {
            color: #f4f4f4; /* Search result text color */
        }

        /* Help button styles */
        .help-button {
            position: fixed; /* Fixed position to keep it at the top right */
            top: 20px; /* Distance from the top */
            right: 20px; /* Distance from the right */
            width: 40px; /* Width of the button */
            height: 40px; /* Height of the button */
            background-color: #1c1c1c; /* Background color */
            color: #f4f4f4; /* Text color */
            border-radius: 50%; /* Makes the button circular */
            text-align: center; /* Centers the text horizontally */
            line-height: 40px; /* Centers the text vertically */
            font-size: 20px; /* Size of the question mark */
            text-decoration: none; /* Removes underline from the link */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* Adds a subtle shadow */
            z-index: 1000; /* Ensures the button is above other elements */
        }

        .help-button:hover {
            color: #1c1c1c; /* Text color */
            background-color: #159643; /* Changes color on hover */
        }

        /* Cog icon styles */
        .cog-icon {
            position: fixed;
            top: 20px;
            left: 20px;
            font-size: 24px;
            cursor: pointer;
            z-index: 1000;
            color: #f4f4f4;
            transition: color 0.3s ease;
        }

        .cog-icon:hover {
            color: #159643; /* Green on hover */
        }

        /* Sidebar styles */
        .sidebar {
            position: fixed;
            top: 0;
            left: -250px;
            width: 250px;
            height: 100%;
            background-color: #1c1c1c;
            transition: left 0.3s ease;
            z-index: 999;
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            visibility: hidden; /* Hide initially */
        }

        .sidebar.open {
            left: 0;
            visibility: visible; /* Show when open */
        }

        .sidebar h2 {
            color: #f4f4f4;
            margin-bottom: 20px;
        }

        .toggle-switch {
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: #f4f4f4;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #159643;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* Light mode styles */
        body.light-mode {
            background-color: #f4f4f4;
            color: #1c1c1c;
        }

        body.light-mode h1,
        body.light-mode .footer-text,
        body.light-mode .guess-title,
        body.light-mode .guess-artist,
        body.light-mode th,
        body.light-mode td,
        body.light-mode .help-button,
        body.light-mode #searchResults div,
        body.light-mode .guess-container,
        body.light-mode #bestGuessContainer div {  /* Added best guess container */
            color: #1c1c1c !important; /* This is for the following: Title, header, guess #1, everything in list of possible artists,  */
        }

        body.light-mode input,
        body.light-mode button {
            background-color: #ffffff;
            color: #1c1c1c;
            border: 1px solid #ccc;
        }

        body.light-mode .sidebar {
            background-color: #ffffff;
            color: #1c1c1c;
        }

        body.light-mode .sidebar h2,
        body.light-mode .toggle-switch {
            color: #1c1c1c;
        }

        body.light-mode .slider {
            background-color: #ccc;
        }

        body.light-mode input:checked + .slider {
            background-color: #159643;
        }

        body.light-mode .cog-icon {
            color: #1c1c1c; /* Black in light mode */
        }

        body.light-mode .cog-icon:hover {
            color: #159643; /* Green on hover */
        }

        body.light-mode .help-button {
            background-color: #ccc; /* Grey background */
            color: #1c1c1c; /* Black text */
        }

        body.light-mode .help-button:hover {
            background-color: #159643; /* Green on hover */
            color: #1c1c1c; /* Black text */
        }

        /* Ensure guess boxes retain their colors in light mode */
        body.light-mode .green { background-color: #159643 !important; }
        body.light-mode .orange { background-color: #b19600 !important; }
        body.light-mode .grey { background-color: grey !important; }

        /* Dark mode adjustments for guess artist titles */
        body:not(.light-mode) .guess-artist {
            color: #f4f4f4; /* White text color */
        }

        /* Help overlay styles */
        .help-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            overflow-y: auto;
            display: none;
            color: #f4f4f4;
        }

        .help-overlay.open {
            display: block;
        }

        .help-content {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 30px;
            background-color: #1c1c1c;
            border-radius: 0;
            position: relative;
        }

        .close-help {
            position: absolute;
            top: 15px;
            right: 15px;
            color: #f4f4f4;
            font-size: 24px;
            cursor: pointer;
        }

        .help-overlay h1,
        .help-overlay h2,
        .help-overlay h3 {
            color: #159643;
            margin-top: 20px;
        }

        .help-overlay ul,
        .help-overlay ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .help-overlay li {
            margin-bottom: 8px;
        }

        .help-overlay strong {
            color: #b19600;
        }

        /* Light mode adjustments */
        body.light-mode .help-overlay {
            background-color: rgba(255, 255, 255, 0.95);
        }

        body.light-mode .help-content {
            background-color: #ffffff;
            color: #1c1c1c;
        }

        body.light-mode .help-overlay h1,
        body.light-mode .help-overlay h2,
        body.light-mode .help-overlay h3 {
            color: #159643;
        }

        body.light-mode .close-help {
            color: #1c1c1c;
        }

        /* Root variables for theme colors */
        :root {
            --bg-color: #ffffff;
            --text-color: #000000;
            --box-color: #f0f0f0;
        }

        /* Dark theme variables */
        [data-theme="dark"] {
            --bg-color: #1a1a1a;
            --text-color: #ffffff;
            --box-color: #2d2d2d;
        }

        /* Tutorial box styles */
        .tutorial-box ul {
            padding-left: 40px;
            list-style-type: disc;
            text-align: left;
        }

        .artist-name {
            color: var(--text-color);
            font-weight: bold;
            margin-bottom: 5px;
        }

        /* Tutorial container styles */
        .tutorial-container {
            width: 100%;
            text-align: left;
            margin: 0;
            padding: 0 20px;
        }

        /* Tutorial box styles */
        .tutorial-box {
            
            padding: 30px;
            margin: 0;
            width: 100%;
            height: 100%;
            text-align: left;
        }

        /* Tutorial image styles */
        .tutorial-img {
            width: 100%;
            max-width: 800px;
            margin: 20px 0;
            border-radius: 10px;
            border: 2px solid var(--text-color);
            display: block;
        }

        /* Light mode adjustments */
        body.light-mode .help-overlay {
            background-color: rgba(255, 255, 255, 0.95);
        }

        body.light-mode .help-content {
            background-color: #ffffff;
            color: #1c1c1c;
        }

        body.light-mode .help-overlay h1,
        body.light-mode .help-overlay h2,
        body.light-mode .help-overlay h3 {
            color: #159643;
        }

        body.light-mode .close-help {
            color: #1c1c1c;
        }

        /* Help button indicator */
        .help-button.open::after {
            content: " ‹";
            font-size: 24px;
            position: relative;
            left: -5px;
        }

    </style> 
</head>
<body>
    <i class="fas fa-cog cog-icon" onclick="toggleSidebar()"></i>
    <div class="sidebar" id="sidebar">
        <h2>Settings</h2>
        <div class="toggle-switch">
            <span>Light Mode</span>
            <label class="switch">
                <input type="checkbox" id="lightModeToggle" onchange="toggleLightMode()">
                <span class="slider"></span>
            </label>
        </div>
        <div class="toggle-switch">
            <span>Hide Best Guess</span>
            <label class="switch">
                <input type="checkbox" id="hideBestGuessToggle" onchange="toggleBestGuessVisibility()">
                <span class="slider"></span>
            </label>
        </div>
    </div>

    <!-- Changed help button -->
    <button class="help-button" onclick="toggleHelpOverlay()">?</button>

    <!-- Tutorial Overlay -->
    <div class="help-overlay" id="helpOverlay">
        <div class="tutorial-container">
            <div class="tutorial-box">
                <div class="help-content">
                    <span class="close-help" onclick="toggleHelpOverlay()">&times;</span>
                    <p>Click on the headings to view the content</p>
                    <h1>Tutorial</h1>
                    <p>Welcome to the Soundmap Artist Guesser Solver! This tool is designed to help you solve the Artist Guesser game by narrowing down the possible artists based on the feedback you receive after each guess. Below is a step-by-step guide on how to use the solver effectively.</p>

                    <h2 onclick="toggleContent(this)">How the game works</h2>
                    <div class="collapsible-content">
                        <p>The Artist Guesser game requires you to guess the correct artist based on feedback in six categories:</p>
                        <ul>
                            <li>Debut Year: The year the artist first made their music.</li>
                            <li>Popularity: A number based on the artist's monthly Spotify streams (compared within their genre).</li>
                            <li>Members: Whether the artist is a solo act or a group.</li>
                            <li>Genre: The artist's music genre (e.g., Hip Hop, Pop, R&B, Indie, Rock).</li>
                            <li>Country: The artist's country of origin (e.g., US, CA, UK).</li>
                            <li>Gender: The artist's gender (Female, Male, or Mixed for groups).</li>
                        </ul>
                        <p>After each guess, the game provides feedback for each category, such as:</p>
                        <ul>
                            <li>Debut Year: "Earlier," "Later," or "Close" (if within 5 years).</li>
                            <li>Popularity: "Higher," "Lower," or "Close" (if within 50 spots).</li>
                            <li>Country: “Correct”, “Wrong” or “Close” (if on the same continent).</li>
                            <li>Members/Genre/Gender: "Correct" or "Wrong."</li>
                        </ul>
                    </div>

                    <h2 onclick="toggleContent(this)">How to use the Solver</h2>
                    <div class="collapsible-content">
                        <p>We will give you an example for each step, in the example we assume that the correct artist is Kanye west.</p>
                        <ol>
                            <li>Enter Your First Guess
                                <ul>
                                    <li>In the Search Bar, type the name of your first guess (e.g., "Alessia Cara").</li>
                                    <li>The solver will display the artist's details in six boxes:
                                        <ul>
                                            <li>Debut Year: 2015</li>
                                            <li>Popularity: 100</li>
                                            <li>Members: Solo</li>
                                            <li>Genre: Pop</li>
                                            <li>Country: CA (Canada)</li>
                                            <li>Gender: Female</li>
                                            
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        <img src="https://github.com/user-attachments/assets/05e7e2de-ef42-4c31-bf86-23c6808e83b9" class="tutorial-img" alt="Enter first guess">
                            <li>Input Feedback from the Game
                                <ul>
                                    <li>Click on each box and select the feedback provided by the game:</li>
                                    <li>Debut Year: Select "Earlier v" (since 2015 is later than 2004 but not within 5 years).</li>
                                    <li>Popularity: Select "Lower v" (since 13 is higher up than 100, but not close because it's not within 50 spots).</li>
                                    <li>Members: Select "Correct" (both are solo).</li>
                                    <li>Genre: Select "Wrong" (Alessia Cara is Pop, but the correct artist is Hip Hop).</li>
                                    <li>Country: Select "Close" (Alessia Cara is from CA correct artist is from the US, and because the US and CA are both in the same continent, its therefor close).</li>
                                    <li>Gender: Select "Wrong" (Alessia is Female, but the correct artist is Male).</li>
                                    
                                </ul>
                            </li>
                        <img src="https://github.com/user-attachments/assets/15f98f80-45b0-4ac0-9fd8-957758746349" class="tutorial-img" alt="Input feedback">
                            <li>View the Updated List of Possible Artists
                                <ul>
                                    <li>After inputting the feedback, the solver will update the list of possible artists based on the new constraints.</li>
                                    <li>The solver will also suggest the Best Next Guess (e.g., "Tyga") to help you narrow down the options further.</li>
                        <img src="https://github.com/user-attachments/assets/e82fa8ad-aac7-453e-99c2-61c77bd78949" class="tutorial-img" alt="Updated list">
                                </ul>
                            </li>
                            <li>Repeat the Process
                                <ul>
                                    <li>Enter the suggested guess (or your own guess) and input the feedback again.</li>
                                    <li>Continue this process until the solver narrows down the list to one artist—the correct answer!</li>
                                </ul>
                            </li>
                        </ol>
                    </div>

                    <h2 onclick="toggleContent(this)">Explanation of the Websites Layout</h2>
                    <div class="collapsible-content">
                        <p>The solver's interface is designed to be intuitive and easy to use. Here's what you'll see and the terms that will be used in the tutorial:</p>
                        <ol>
                            <li>Header:
                                <ul>
                                    <li>"Soundmap Artist Guesser Solver"</li>
                                </ul>
                            </li>
                            <li>Search Bar:
                                <ul>
                                    <li>Enter the artist's name here (e.g., "Kanye West").</li>
                                </ul>
                            </li>
                            <li>Guess Section:
                                <ul>
                                    <li>Each guess is displayed with the artist's name and six boxes for feedback.</li>
                                    <li>Example:
                                        <ul>
                                            <li>Guess #1: Kanye West</li>
                                            <li>Boxes: [Debut Year], [Popularity], [Members], [Genre], [Country], [Gender].</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li>Best Guess Section:
                                <ul>
                                    <li>The solver will display the best next guess (e.g., "Best Guess: Snoop Dogg").</li>
                                    <li>A button allows you to make this artist your next guess rather than having to search it up.</li>
                                </ul>
                            </li>
                            <li>Scrollable Artist List:
                                <ul>
                                    <li>A table showing all possible artists with their details:
                                        <ul>
                                            <li>Columns: Artist, Debut, Popularity, Members, Genre, Country, Gender.</li>
                                            <li>Example: "Kanye West," "2004," "13," "Solo," "Hip Hop," "US," "Male."</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li>Settings:
                                <ul>
                                    <li>At the top left of the website is a settings icon that opens a side bar with all the settings:
                                        <ul>
                                            <li>The light mode switch toggles light mode. Whatever option you select (it will remain dark mode until you change it) will always be the option whenever you revisit the website, so don't worry about having to re toggle! </li>
                                            <li>The hide best guess option is for anyone that wants to do the solving on their own. If you want to play the game for yourself then you can simply hide the best guess feature (so you don't get any spoilers), and then you can use the list of possible artists to play :)</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ol>
                    </div>

                    <h2 onclick="toggleContent(this)">Tips for Success</h2>
                    <div class="collapsible-content">
                        <ol>
                            <li><strong>Start with a Diverse Guess:</strong>
                                <ul>
                                    <li>Choose an artist with a debut year, popularity, and genre that are in the middle of the range. This helps eliminate a large portion of the list.</li>
                                    <li>I used an algorithm that tested every combination of first guess and found that the % chance of getting the artist correct in the 2/3rd guess:
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>Artist</th>
                                                    <th>2 Guesses</th>
                                                    <th>3 Guesses</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr><td>Yuridia</td><td>8.44%</td><td>37.14%</td></tr>
                                                <tr><td>INNA</td><td>8.24%</td><td>37.44%</td></tr>
                                                <tr><td>Stromae</td><td>8.14%</td><td>37.84%</td></tr>
                                                <tr><td>Zara Larsson</td><td>7.94%</td><td>36.25%</td></tr>
                                                <tr><td>Alessia Cara</td><td>7.85%</td><td>36.44%</td></tr>
                                            </tbody>
                                        </table>
                                    </li>
                                    <li>However, if you have already made your first guess (or any amount of guesses for that matter) then that's ok, but use one of the best first guesses in the future.</li>
                                </ul>
                            </li>
                            <li><strong>Pay Attention to Feedback:</strong>
                                <ul>
                                    <li>Make sure that the information that you put into the program is exactly what the game has told you, otherwise the right answer cannot be found!</li>
                                </ul>
                            </li>
                            <li><strong>Use the Best Guess Feature:</strong>
                                <ul>
                                    <li>The solver's suggested guess is the most efficient guess, found using an algorithm.</li>
                                </ul>
                            </li>
                        </ol>
                    </div>

                    <h2 onclick="toggleContent(this)">Example Walkthrough</h2>
                    <div class="collapsible-content">
                        <ul>
                            <li>Full example of using the website. In this example the correct artist is Kanye West.</li>
                            <ol>
                                <li>You make your first guess, which in this case is Alessia Cara:
                                    <ul>
                                        <li>Debut Year: 2015</li>
                                        <li>Popularity: 100</li>
                                        <li>Members: Solo</li>
                                        <li>Genre: Pop</li>
                                        <li>Country: CA</li>
                                        <li>Gender: Female</li>
                    <img src="https://github.com/user-attachments/assets/73ba6f84-532d-42db-8319-1ffe7868e954" class="tutorial-img" alt="First guess">
                                    </ul>
                                </li>
                                <li>You then input the information that the game has told you, which is the following:
                                    <ul>
                                        <li>Debut Year: 2015 "Earlier v”</li>
                                        <li>Popularity: 100 "Higher ^"</li>
                                        <li>Members: Solo "Correct"</li>
                                        <li>Genre: Pop "Wrong"</li>
                                        <li>Country: CA "Close"</li>
                                        <li>Gender: Female "Wrong”</li>
                    <img src="https://github.com/user-attachments/assets/8ed56dc9-fe00-463b-b3d8-20c271587cd3" class="tutorial-img" alt="Information first guess">
                                    </ul>
                                </li>
                                <li>Then the solver will tell you what the best guess is (Tyga), you then go to the game and make the best guess (Tyga) your next guess (you can either search up the best guess or simply click the box below the best guess).
                                    <ul>
                                        <li>Debut Year: 2009</li>
                                        <li>Popularity: 31</li>
                                        <li>Members: Solo</li>
                                        <li>Genre: Hip Hop</li>
                                        <li>Country: US</li>
                                        <li>Gender: Male</li>
                    <img src="https://github.com/user-attachments/assets/3d18a8ba-01b4-4091-b3f3-2e0296d45d76" class="tutorial-img" alt="Best guess">
                                    </ul>
                                </li>
                                <li>Once again you input the information:
                                    <ul>
                                        <li>Debut Year: 2009 "Close v”</li>
                                        <li>Popularity: 31 "Close ^"</li>
                                        <li>Members: Solo "Correct"</li>
                                        <li>Genre: Hip Hop "Correct"</li>
                                        <li>Country: US "Correct"</li>
                                        <li>Gender: Male "Correct”</li>
                    <img src="https://github.com/user-attachments/assets/dec8abd7-9ec6-4299-b59b-06b86778098c" class="tutorial-img" alt="Information second guess">
                                    </ul>
                                </li>
                                <li>The solver then tells you that the artist is either Wiz Khalifa or Kanye West. At this stage you either get it right or you don't depending on who you choose to pick (don't worry on the next guess you guarantee a win).</li>
                            </ol>
                        </ul>
                    </div>

                    <h2 onclick="toggleContent(this)">How the Algorithms work (complex)</h2>
                    <div class="collapsible-content">
                        <ul>
                            <li>Overview:</li>
                            <ul>
                                <li>The goal of this algorithm is to choose the best artist guess in an artist guessing game by minimizing the search space after each guess. The algorithm utilizes entropy to evaluate how well each attribute (such as genre, debut year, and popularity) splits the list of possible artists. It then refines the guess by balancing the median values of debut year and popularity within the most common genre.</li>
                                <li>The primary steps are:
                                    <ol>
                                        <li>Calculate entropy for each attribute (genre, debut year, popularity).</li>
                                        <li>Filter artists by the most common genre.</li>
                                        <li>Balance the guess based on median debut year and median popularity within that genre.</li>
                                        <li>Choose the artist closest to both the median debut year and popularity to minimize uncertainty.</li>
                                        <li>Repeat until the correct artist is guessed.</li>
                                    </ol>
                                </li>
                            </ul>
                            <li>Detailed Steps of the Algorithm:</li>
                            <ul>
                                <li>Step 1: Calculate Entropy for Each Attribute</li>
                                <li>Entropy is a measure of uncertainty or randomness. The attribute with the highest entropy is the one that best divides the dataset into smaller groups. The higher the entropy, the more evenly the dataset is split, which helps the algorithm narrow down the possibilities effectively.</li>
                                <li>Entropy is calculated as:
                                    <ul>
                                        <li><strong>H(x)= - ∑p(x)log<sub>2</sub>p(x)</strong></li>
                                    </ul>
                                </li>
                                <li>Where:
                                    <ul>
                                        <li>X is an attribute (such as genre, debut year, or popularity).</li>
                                        <li>p(x) is the probability of each value occurring (e.g., the fraction of artists belonging to each genre).</li>
                                    </ul>
                                </li>
                                <li>For each attribute, calculate the entropy. For example:
                                    <ul>
                                        <li>Genre: Splits artists into categories like Rock, Pop, Jazz, etc.</li>
                                        <li>Debut Year: Could be split into ranges (before 2000, after 2000).</li>
                                        <li>Popularity: Splits into ranges (e.g., low, medium, high).</li>
                                    </ul>
                                </li>

                                <li>Step 2: Find the Most Common Genre</li>
                                <li>The first step in narrowing down the artist pool is to filter by genre, since the genre with the highest entropy divides the list of artists most evenly.
                                    <ul>
                                        <li>Find the most common genre among the remaining artists.</li>
                                        <li>Filter the list to include only the artists that belong to that genre.</li>
                                    </ul>
                                </li>
                                <li>Example:
                                    <ul>
                                        <li>If the remaining artists are divided into five genres, and Rock is the most common, filter the list to only Rock artists.</li>
                                    </ul>
                                </li>

                                <li>Step 3: Find the Median Debut Year and Popularity within the Most Common Genre</li>
                                <li>Once we've filtered the artists by genre, we need to refine the guess using debut year and popularity.
                                    <ul>
                                        <li>Compute the median debut year within the filtered genre. This gives us the central value of debut years for that genre.</li>
                                        <li>Compute the median popularity within the filtered genre. This gives us the central value of popularity for that genre.</li>
                                    </ul>
                                </li>

                                <li>Step 4: Normalize and Compute the Best Guess</li>
                                <li>Next, we need to find an artist that is closest to both the median debut year and median popularity.</li>
                                <li>To ensure each attribute contributes equally, we normalize the values to account for different ranges of debut year and popularity.
                                    <ul>
                                        <li>Normalize the debut year by calculating the distance between the artist's debut year and the median debut year, relative to the range of debut years in the genre.</li>
                                        <li>Normalize the popularity by calculating the distance between the artist's popularity and the median popularity, relative to the range of popularity in the genre.</li>
                                <li>The normalized distance is computed as:
                                    <ul>
                                        <p><strong>Normalised Distance =</strong> \( \frac{\text{Artist Value} - \text{Median Value}}{\text{Range of Values}} \)</p>
                                    </ul>
                                </li>
                                <li>Where:
                                    <ul>
                                        <li>The range of values is the difference between the maximum and minimum values of debut year or popularity within the genre.</li>
                                    </ul>
                                </li>
                                <li>After calculating the normalized distance for both debut year and popularity, we sum the two distances to get a total score for each artist.</li>
                                <li>The formula is:
                                    <ul>
                                        <p><strong>Score =</strong> \( \frac{\text{Debut Year} - \text{Median Debut Year}}{\text{Max(Debut Year)} - \text{Min(Debut Year)}} \) + \( \frac{\text{Popularity} - \text{Median Popularity}}{\text{Max(Popularity)} - \text{Min(Popularity)}} \)</p>
                                        <li>Lower scores indicate that the artist is closer to both the median debut year and median popularity, making it the best guess.</li>
                                        <li>The artist with the smallest score is selected as the best guess.</li>
                                    </ul>
                                </li>
                                    </ul>
                                </li>

                                <li>Step 5: Update the List Based on Feedback</li>
                                <li>Once a guess is made, feedback is received, and the remaining search space is updated:
                                    <ul>
                                        <li>If the genre is correct, filter to that genre and use the feedback to narrow down the list further.</li>
                                        <li>If the debut year or popularity is close, update the search space based on the feedback provided (e.g., "higher debut year" or "lower popularity").</li>
                                        <li>Repeat the process: Recalculate entropy, find the next best guess, and continue refining the search until the correct artist is found.</li>
                                    </ul>
                                </li>

                                <li>Conclusion</li>
                                <li>This algorithm balances entropy and median values to make the best guess. By filtering artists based on the most common genre and refining the guess based on both debut year and popularity, it quickly narrows down the possibilities. The best guess is the artist closest to both the median debut year and popularity within the most common genre, ensuring that the game progresses efficiently with each guess.</li>
                            </ul>
                        </ul>
                    </div>

                    <h2 onclick="toggleContent(this)">How to contact me (The creator)</h2>
                    <div class="collapsible-content">
                        <ul>
                            <li><a href="https://www.reddit.com/user/CATninja58/" target="_blank">Reddit</a></li>
                            <li><a href="https://www.tiktok.com/@soundmapsolver" target="_blank">TikTok</a></li>

                        </ul>
                    </div>

                    <h2>Conclusion</h2>
                    <p>The <strong>Soundmap Artist Guesser Solver</strong> is a powerful tool to help you solve the Artist Guesser game efficiently. By following this tutorial, you'll be able to input feedback, narrow down the list of possible artists, and make the best guesses to find the correct answer quickly. Happy guessing!</p>     

                    <script>
                        function toggleContent(element) {
                            const content = element.nextElementSibling;
                            content.style.display = content.style.display === 'none' ? 'block' : 'none';
                        }

                        document.addEventListener('DOMContentLoaded', () => {
                            const collapsibleContents = document.querySelectorAll('.collapsible-content');
                            collapsibleContents.forEach(content => content.style.display = 'none');
                        });
                    </script>
                </div>
            </div>
        </div>
    </div>

    <div class="help-overlay" id="firstGuessOverlay">
        <div class="tutorial-container">
            <div class="tutorial-box">
                <div class="help-contect">
                    <span class="close-help" onclick="closeHelpOverlay()">&times;</span>
                    <p>Your first guess being <b id="firstGuess"></b> is really inefficient because your chance to get the correct artist in 3 guesses is <b id="ThreePercent"></b> and your chance to get it in 2 guesses is just <b id="TwoPercent"></b>.</p>
                    <p>If you want to get more gems per day, I would suggest making your first guess one of these 5 artists:</p>
                    <table>
                        <thead>
                            <tr>
                                <th>Artist</th>
                                <th>2 Guesses</th>
                                <th>3 Guesses</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Yuridia</td><td>8.44%</td><td>37.14%</td></tr>
                            <tr><td>INNA</td><td>8.24%</td><td>37.44%</td></tr>
                            <tr><td>Stromae</td><td>8.14%</td><td>37.84%</td></tr>
                            <tr><td>Zara Larsson</td><td>7.94%</td><td>36.25%</td></tr>
                            <tr><td>Alessia Cara</td><td>7.85%</td><td>36.44%</td></tr>
                        </tbody>
                    </table>
                    <button onclick="closeHelpOverlay()">Close</button>
                </div>
            </div>
        </div>
      </div>

    <div class="footer-text">Made by u/CATninja58. Soundmap user: jeddosterives</div>
    <h1>Soundmap Artist Guesser Solver</h1>

    <button onclick="resetSolver()">Reset</button>

    <input type="text" id="artistSearch" placeholder="Enter artist name" oninput="searchArtist()">
    <div id="searchResults"></div>

    <!-- Modal structure -->
    <div id="myModal" class="modal hidden">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modalOptions"></div>
        </div>
    </div>

    <div id="guessesContainer" class="guess-container" style="margin-top: 40px; margin-bottom: 20px; gap: 20px;">
        <!-- Guesses will be dynamically added here -->
    </div>

    <div style="height: 60px;"></div> <!-- Added space between the two containers -->

    <div id="bestGuessContainer" class="guess-container" style="margin-top: 40px; margin-bottom: 20px;">
        <!-- Best guess will be dynamically added here -->
    </div>

    <button id="bestGuessButton" class="hidden" onclick="makeBestGuessNext()">Click to make <span id="bestGuessName">best guess</span> your next guess</button>
    
    <div id="chanceContainer" class="footer-text" style="margin-top: 20px;"></div>

    <div class="results-container">
        <div class="footer-text" style="font-size: 16px;">List of possible artists</div>
        <div class="footer-text">Scroll to the right for all the stats on artists</div>
        <div class="artist-list-wrapper">
            <table>
                <thead>
                    <tr>
                        <th style="min-width: 300px;" data-category="artist">Artist</th>
                        <th style="min-width: 200px;" data-category="debut">Debut</th>
                        <th style="min-width: 250px;" data-category="popularity">Popularity</th>
                        <th style="min-width: 200px;" data-category="members">Members</th>
                        <th style="min-width: 200px;" data-category="genre">Genre</th>
                        <th style="min-width: 200px;" data-category="country">Country</th>
                        <th style="min-width: 200px;" data-category="gender">Gender</th>
                    </tr>
                </thead>
                <tbody id="artistList"></tbody>
            </table>
        </div>
        <!-- Artists matching the guess will be displayed here -->
    </div>
    <div class="footer-text">Made by u/CATninja58. Soundmap user: jeddosterives</div>
      
    <script>
        let artistsData = [];
        let artistInfo = {};
        let filteredArtists = [];

        let artistsDataSorted = [];
        let artistInfoSorted = {};
        let filteredArtistsSorted = [];

        let guesses = [];
        let guessCount = 0;

        function isAndroid() {
            return /Android/i.test(navigator.userAgent);
        }

        function loadCSV(csvUrl) {
            fetch(csvUrl)
                .then(response => response.text())
                .then(csvText => parseCSV(csvText))
                .catch(error => console.error("Error loading CSV file:", error));
        }

        function parseCSV(csvText) {
            const rows = csvText.split("\n");
            rows.shift();
            artistsData = rows.map(row => {
                const [artist, debut, popularity, members, genre, country, gender] = row.split(",");
                return { artist, debut, popularity, members, genre, country, gender };
            });
            filteredArtists = [...artistsData];
            displayArtists();
        }

        function loadSortedCSV(csvUrl) {
            fetch(csvUrl)
            .then(response => response.text())
            .then(csvText => parseSortedCSV(csvText))
            .catch(error => console.error("Error loading Sorted CSV file:", error));
        }

        function parseSortedCSV(csvText) {
            const rows = csvText.split("\n");
            rows.shift();
            artistsDataSorted = rows.map(row => {
            const [Artist, TwoGuesses, ThreeGuesses] = row.split(",");
            return { Artist, TwoGuesses, ThreeGuesses };
            });
            filteredArtistsSorted = [...artistsDataSorted];
        }

        function searchArtist() {
            const query = document.getElementById("artistSearch").value.toLowerCase();
            const searchResults = document.getElementById("searchResults");
            searchResults.innerHTML = '';

            if (query) {
            const matches = artistsData.filter(artist => artist.artist.toLowerCase().includes(query));
            matches.forEach(match => {
                const resultDiv = document.createElement("div");
                resultDiv.textContent = match.artist;
                resultDiv.onclick = () => {
                displayArtistInfo(match.artist);
                document.getElementById("artistSearch").value = '';
                searchResults.innerHTML = '';
                };
                searchResults.appendChild(resultDiv);
            });
            }
        }

        function displayArtistInfo(artistName) {
            const artist = artistsData.find(artist => artist.artist === artistName);
            if (artist) {
            artistInfo = artist;
            addGuess(artist);
            }
        }

        function addGuess(artist) {
            guessCount++;
            const guessesContainer = document.getElementById("guessesContainer");

            const guessTitle = document.createElement("div");
            guessTitle.classList.add("guess-title");
            guessTitle.textContent = `Guess #${guessCount}`;
            guessesContainer.appendChild(guessTitle);

            const artistName = document.createElement("div");
            artistName.textContent = artist.artist;
            
            guessesContainer.appendChild(artistName);

            const guessBoxes = document.createElement("div");
            guessBoxes.style.height = "50px"; /* Set fixed height */
            guessBoxes.classList.add("button-container");
            guessBoxes.style.height = "50px"; /* Set fixed height */
            guessBoxes.classList.add("guess-boxes");
            guessesContainer.appendChild(guessBoxes);

            const guess = { artist, selectedOptions: {} };
            guesses.push(guess);

            createButtons(artist, guessBoxes, guess);
            if(guessCount === 1){
            const TwoPercent = getPercentFor(artist, 2) || 0; // Default to 0 if undefined
            const ThreePercent = getPercentFor(artist, 3) || 0; // Default to 0 if undefined
            if (parseFloat(TwoPercent) < 5.00 || parseFloat(ThreePercent) < 30.00) {
                revealOverlayText(artist.artist, TwoPercent, ThreePercent);
            }
            }
        }

        function getPercentFor(artist, guessCount) {
            if (!filteredArtistsSorted || filteredArtistsSorted.length === 0) {
            console.error("filteredArtistsSorted is empty or not loaded.");
            return 0;
            }

            const artistData = filteredArtistsSorted.find(data => data.Artist.trim().toLowerCase() === artist.artist.trim().toLowerCase());
            if (artistData) {
            return guessCount === 2 ? parseFloat(artistData.TwoGuesses) || 0 : parseFloat(artistData.ThreeGuesses) || 0;
            }

            console.warn(`Artist "${artist.artist}" not found in filteredArtistsSorted.`);
            return 0;
        }

        function revealOverlayText(firstGuess, TwoPercent, ThreePercent) {
            const overlay = document.getElementById('firstGuessOverlay');
            document.getElementById('firstGuess').textContent = firstGuess;
            document.getElementById('TwoPercent').textContent = `${TwoPercent}%`;
            document.getElementById('ThreePercent').textContent = `${ThreePercent}%`;
            overlay.style.display = "block"; // Ensure the overlay is visible
        }

        function closeHelpOverlay() {
            const overlay = document.getElementById("firstGuessOverlay");
            overlay.style.display = "none";
        }

        function resetSolver() {
            // Clear the search input
            document.getElementById("artistSearch").value = '';

            // Clear the search results
            document.getElementById("searchResults").innerHTML = '';

            // Clear the guesses
            document.getElementById("guessesContainer").innerHTML = '';

            // Clear the best guess
            document.getElementById("bestGuessContainer").innerHTML = '';

            // Clear the chance container
            document.getElementById("chanceContainer").innerHTML = '';

            // Reset the guesses array and count
            guesses = [];
            guessCount = 0;

            // Reset the filtered artists to the full list
            filteredArtists = [...artistsData];
            filteredArtistsSorted = [...artistsDataSorted]; // Reload the sorted artists data
            displayArtists();

            // Recalculate the best guess
            calculateBestGuess();

            // Reset the first guess overlay
            const overlay = document.getElementById("firstGuessOverlay");
            overlay.style.display = "none";
        }

        function createButtons(artist, container, guess) {
            const categories = ["debut", "popularity", "members", "genre", "country", "gender"];
            categories.forEach(category => {
            const button = document.createElement("button");
            button.innerHTML = `<span class="button-text">${category.charAt(0).toUpperCase() + category.slice(1)}: ${artist[category]}</span><br><span class="button-text">(${guess.selectedOptions[category] || "Choose Option"})</span>`;
            button.onclick = () => showDropdown(button, category, artist[category], guess);
            container.appendChild(button);
            });
        }
    
        function showDropdown(button, category, value, guess) {
            if (isAndroid()) {
                showModal(button, category, value, guess);
            }  else {
                const dropdown = document.createElement("select");
                const options = getCategoryOptions(category);

                const defaultOption = document.createElement("option");
                defaultOption.value = "";
                defaultOption.textContent = "Choose an option";
                dropdown.appendChild(defaultOption);

                options.forEach(option => {
                    const optionElement = document.createElement("option");
                    optionElement.value = option;
                    optionElement.textContent = option;
                    dropdown.appendChild(optionElement);
                });

                dropdown.onchange = () => {
                    const selectedOption = dropdown.value;
                    guess.selectedOptions[category] = selectedOption;
                    changeButtonColor(button, selectedOption);
                    button.innerHTML = `<span class="button-text">${category.charAt(0).toUpperCase() + category.slice(1)}: ${value}</span><br><span class="button-text">(${selectedOption})</span>`;
                    filterArtists();
                    button.removeChild(dropdown); // Remove the dropdown after selection
                };

                dropdown.size = options.length;
                button.innerHTML = `<span class="button-text">${category.charAt(0).toUpperCase() + category.slice(1)}: ${value}</span><br><span class="button-text">(Choose Option)</span>`;
                button.appendChild(dropdown);
                dropdown.focus();
            }
        }

        function showModal(button, category, value, guess) {
            const modal = document.getElementById("myModal");
            const modalOptions = document.getElementById("modalOptions");
            modalOptions.innerHTML = '';

            const options = getCategoryOptions(category);
            options.forEach(option => {
                const optionDiv = document.createElement("div");
                optionDiv.classList.add("modal-option");
                optionDiv.textContent = option;
                optionDiv.onclick = () => {
                    guess.selectedOptions[category] = option;
                    changeButtonColor(button, option);
                    button.innerHTML = `<span class="button-text">${category.charAt(0).toUpperCase() + category.slice(1)}: ${value} (${option})</span>`;
                    filterArtists();
                    modal.classList.add("hidden"); // Hide the modal after selection
                };
                modalOptions.appendChild(optionDiv);
            });

            modal.classList.remove("hidden"); // Show the modal

            const closeModal = document.getElementsByClassName("close")[0];
            closeModal.onclick = () => {
                modal.classList.add("hidden");
            };

            window.onclick = (event) => {
                if (event.target == modal) {
                    modal.classList.add("hidden");
                }
            };
        }

        function revealModal(){
            const myModal1 = document.getElementById("myModal");

            // Show the button if a best guess is found
            myModal1.classList.remove("hidden");
        }

        function hideModal(){
            const myModal2 = document.getElementById("myModal");

            myModal2.classList.add("hidden");
        }

        function getCategoryOptions(category) {
            switch (category) {
            case 'debut':
                return ['correct', 'later ^', 'earlier v', 'close ^', 'close v'];
            case 'popularity':
                return ['correct', 'higher ^', 'lower v', 'close ^', 'close v'];
            case 'members':
            case 'genre':
            case 'gender':
                return ['correct', 'wrong'];
            case 'country':
                return ['correct', 'wrong', 'close'];
            default:
                return [];
            }
        }

        function changeButtonColor(button, option) {
            if (option === 'correct') {
            button.className = 'green';
            } else if (option === 'close ^' || option === 'close v' || option === 'close') {
            button.className = 'orange';
            } else if (option === 'wrong' || option === 'later ^' || option === 'earlier v' || option === 'higher ^' || option === 'lower v') {
            button.className = 'grey';
            }
        }

        function filterArtists() {
            filteredArtists = artistsData.filter(artist => {
            return guesses.every(guess => {
                return Object.keys(guess.selectedOptions).every(category => {
                const option = guess.selectedOptions[category];
                const artistValue = artist[category];

                if (!option) return true;

                if (option === 'correct') {
                    return artistValue === guess.artist[category];
                } else if (category === 'debut') {
                    return filterDebut(option, artistValue, guess.artist[category]);
                } else if (category === 'popularity') {
                    return filterPopularity(option, artistValue, guess.artist[category]);
                } else if (category === 'country') {
                    return filterCountry(option, artistValue, guess.artist[category]);
                } else if (option === 'wrong') {
                    return artistValue !== guess.artist[category];
                } else {
                    return false;
                }
                });
            });
            });

            displayArtists();
            calculateBestGuess();
            updateChance();
        }

        function filterDebut(option, artistValue, guessValue) {
            if (option === 'correct') {
            return artistValue === guessValue;
            } else if (option === 'later ^') {
            return parseInt(artistValue) > parseInt(guessValue) && Math.abs(parseInt(artistValue) - parseInt(guessValue)) > 5;
            } else if (option === 'earlier v') {
            return parseInt(artistValue) < parseInt(guessValue) && Math.abs(parseInt(artistValue) - parseInt(guessValue)) > 5;
            } else if (option === 'close ^') {
            return parseInt(artistValue) > parseInt(guessValue) && Math.abs(parseInt(artistValue) - parseInt(guessValue)) <= 5;
            } else if (option === 'close v') {
            return parseInt(artistValue) < parseInt(guessValue) && Math.abs(parseInt(artistValue) - parseInt(guessValue)) <= 5;
            } else {
            return false;
            }
        }

        function filterPopularity(option, artistValue, guessValue) {
            if (option === 'correct') {
            return artistValue === guessValue;
            } else if (option === 'higher ^') {
            return parseInt(artistValue) < parseInt(guessValue) && Math.abs(parseInt(artistValue) - parseInt(guessValue)) > 50;
            } else if (option === 'lower v') {
            return parseInt(artistValue) > parseInt(guessValue) && Math.abs(parseInt(artistValue) - parseInt(guessValue)) > 50;
            } else if (option === 'close ^') {
            return parseInt(artistValue) < parseInt(guessValue) && Math.abs(parseInt(artistValue) - parseInt(guessValue)) <= 50;
            } else if (option === 'close v') {
            return parseInt(artistValue) > parseInt(guessValue) && Math.abs(parseInt(artistValue) - parseInt(guessValue)) <= 50;
            } else {
            return false;
            }
        }

        function filterCountry(option, artistValue, guessValue) {
            const continentMap = {
            'NA': ['US', 'CA', 'MX', 'GT', 'HN', 'SV', 'NI', 'CR', 'PA', 'BS', 'CU', 'HT', 'DO', 'JM', 'TT', 'BB', 'LC', 'VC', 'GD', 'AG', 'DM', 'KN'],
            'SA': ['BR', 'AR', 'CL', 'CO', 'VE', 'PE', 'BO', 'PY', 'UY', 'GY', 'SR', 'EC'],
            'EU': ['UK', 'GB', 'FR', 'DE', 'IT', 'ES', 'PL', 'RO', 'NL', 'BE', 'GR', 'CZ', 'PT', 'HU', 'SE', 'AT', 'CH', 'BG', 'DK', 'FI', 'SK', 'NO', 'IE', 'HR', 'SI', 'LV', 'EE', 'CY', 'LU', 'MT', 'IS', 'LI', 'MC', 'SM', 'VA', 'RU', 'UA', 'BY', 'MD', 'BA', 'ME', 'MK', 'AL', 'RS', 'XK'],
            'AS': ['CN', 'JP', 'IN', 'ID', 'PK', 'BD', 'PH', 'VN', 'TR', 'IR', 'TH', 'MM', 'KR', 'IQ', 'SA', 'UZ', 'MY', 'YE', 'NP', 'LK', 'KZ', 'SY', 'KH', 'JO', 'AZ', 'AE', 'IL', 'TJ', 'LA', 'LB', 'KG', 'TM', 'SG', 'OM', 'KW', 'GE', 'MN', 'AM', 'QA', 'BH', 'BT', 'MV', 'BN'],
            'AF': ['ZA', 'NG', 'EG', 'DZ', 'MA', 'ET', 'TZ', 'KE', 'UG', 'SD', 'GH', 'CM', 'CI', 'ML', 'BF', 'NE', 'MW', 'ZM', 'SN', 'ZW', 'TD', 'SO', 'GN', 'RW', 'BI', 'BJ', 'SL', 'TG', 'SS', 'LY', 'LR', 'MR', 'GA', 'GM', 'GW', 'LS', 'SZ', 'KM', 'CV', 'ST', 'SC', 'DJ', 'ER'],
            'OC': ['AU', 'NZ', 'FJ', 'PG', 'SB', 'VU', 'NC', 'PF', 'WS', 'KI', 'TO', 'TV', 'NR', 'FM', 'MH', 'PW']
            };

            if (option === 'correct') {
            return artistValue === guessValue;
            } else if (option === 'close') {
            const guessContinent = Object.keys(continentMap).find(continent => continentMap[continent].includes(guessValue));
            const artistContinent = Object.keys(continentMap).find(continent => continentMap[continent].includes(artistValue));
            return guessContinent === artistContinent && guessValue !== artistValue;
            } else if (option === 'wrong') {
            const guessContinent = Object.keys(continentMap).find(continent => continentMap[continent].includes(guessValue));
            const artistContinent = Object.keys(continentMap).find(continent => continentMap[continent].includes(artistValue));
            return artistValue !== guessValue && guessContinent !== artistContinent;
            } else {
            return false;
            }
        }

        function displayArtists() {
            const artistList = document.getElementById("artistList");
            artistList.innerHTML = '';

            filteredArtists.forEach(artist => {
            if (artist.artist) { // Filter out artists without a name
                const artistItem = document.createElement("tr");

                artistItem.innerHTML = `
                <td>${artist.artist}</td>
                <td>${artist.debut}</td>
                <td>${artist.popularity}</td>
                <td>${artist.members}</td>
                <td>${artist.genre}</td>
                <td>${artist.country}</td>
                <td>${artist.gender}</td>
                `;

                artistList.appendChild(artistItem);
            }
            });
        }

        let sortOrder = {
            artist: 'asc',
            debut: 'asc',
            popularity: 'asc',
            members: 'asc',
            genre: 'asc',
            country: 'asc',
            gender: 'asc'
        };

        function sortArtists(category) {
            const sortOrderIcon = sortOrder[category] === 'asc' ? 'v' : '^';
            const headers = document.querySelectorAll('th');
            headers.forEach(header => {
                if (header.dataset.category === category) {
                    header.textContent = header.textContent.replace(/[\^v]/, '') + ' ' + sortOrderIcon;
                } else {
                    header.textContent = header.textContent.replace(/[\^v]/, '');
                }
            });

            filteredArtists.sort((a, b) => {
                if (category === 'debut' || category === 'popularity') {
                    return sortOrder[category] === 'asc' ? a[category] - b[category] : b[category] - a[category];
                } else if (category === 'members') {
                    const order = ['Solo', 'Group'];
                    return sortOrder[category] === 'asc' ? order.indexOf(a[category]) - order.indexOf(b[category]) : order.indexOf(b[category]) - order.indexOf(a[category]);
                } else if (category === 'genre') {
                    const order = ['Pop', 'Hip Hop', 'Indie', 'Rock', 'R&B'];
                    return sortOrder[category] === 'asc' ? order.indexOf(a[category]) - order.indexOf(b[category]) : order.indexOf(b[category]) - order.indexOf(a[category]);
                } else if (category === 'country' || category === 'gender') {
                    return sortOrder[category] === 'asc' ? a[category].toLowerCase().localeCompare(b[category].toLowerCase()) : b[category].toLowerCase().localeCompare(a[category].toLowerCase());
                } else {
                    return sortOrder[category] === 'asc' ? a[category].toLowerCase().localeCompare(b[category].toLowerCase()) : b[category].toLowerCase().localeCompare(a[category].toLowerCase());
                }
            });

            sortOrder[category] = sortOrder[category] === 'asc' ? 'desc' : 'asc';
            displayArtists();
        }

        document.addEventListener('DOMContentLoaded', () => {
            const headers = document.querySelectorAll('th[data-category]');
            headers.forEach(header => {
                header.addEventListener('click', () => {
                    const category = header.dataset.category;
                    sortArtists(category);
                });
            });
        });

        function calculateEntropy(artists) {
            const genreCounts = artists.reduce((acc, artist) => {
                acc[artist.genre] = (acc[artist.genre] || 0) + 1;
                return acc;
            }, {});
            
            const total = artists.length;
            let entropy = 0;

            for (const genre in genreCounts) {
                const probability = genreCounts[genre] / total;
                entropy -= probability * Math.log2(probability);
            }

            return entropy;
        }

        function calculateInformationGain(artists, category) {
            const uniqueValues = [...new Set(artists.map(artist => artist[category]))];
            let totalEntropy = calculateEntropy(artists);

            let weightedEntropy = 0;
            uniqueValues.forEach(value => {
                const subset = artists.filter(artist => artist[category] === value);
                weightedEntropy += (subset.length / artists.length) * calculateEntropy(subset);
            });

            return totalEntropy - weightedEntropy;
        }

        function calculateBestGuess() {
            const bestGuessButton = document.getElementById("bestGuessButton");
            const bestGuessContainer = document.getElementById("bestGuessContainer");

            if (filteredArtists.length === 0) {
            bestGuessButton.classList.add("hidden");
            bestGuessContainer.innerHTML = 'Error';
            return;
            }

            // Step 1: Find the most common genre
            const genreCounts = filteredArtists.reduce((acc, artist) => {
            acc[artist.genre] = (acc[artist.genre] || 0) + 1;
            return acc;
            }, {});

            const mostCommonGenre = Object.keys(genreCounts).reduce((a, b) => genreCounts[a] > genreCounts[b] ? a : b);
            const artistsInMostCommonGenre = filteredArtists.filter(artist => artist.genre === mostCommonGenre);

            // Step 2: Find the median popularity for all artists
            const sortedByPopularity = [...filteredArtists].sort((a, b) => parseInt(a.popularity) - parseInt(b.popularity));
            const medianPopularityIndex = Math.floor(sortedByPopularity.length / 2);
            const medianPopularity = sortedByPopularity[medianPopularityIndex].popularity;

            // Step 3: Filter artists with the median popularity within the most common genre
            const medianPopularityArtists = artistsInMostCommonGenre.filter(artist => artist.popularity === medianPopularity);

            // Step 4: Calculate the median debut year for all artists
            const allArtistsSortedByDebut = [...filteredArtists].sort((a, b) => parseInt(a.debut) - parseInt(b.debut));
            const medianDebutIndex = Math.floor(allArtistsSortedByDebut.length / 2);
            const medianDebut = allArtistsSortedByDebut[medianDebutIndex].debut;

            // Step 5: Among the median popularity artists, find the one with the debut year closest to the median debut year
            let closestArtist = medianPopularityArtists[0];
            let closestDifference = Math.abs(parseInt(closestArtist.debut) - medianDebut);

            for (let i = 1; i < medianPopularityArtists.length; i++) {
            const currentDifference = Math.abs(parseInt(medianPopularityArtists[i].debut) - medianDebut);
            if (currentDifference < closestDifference) {
                closestArtist = medianPopularityArtists[i];
                closestDifference = currentDifference;
            }
            }

            const bestGuessArtist = closestArtist;

            const bestGuessElement = document.createElement("div");
            bestGuessElement.textContent = `Best Guess: ${bestGuessArtist.artist}`;
            bestGuessElement.style.color = "#f4f4f4";
            bestGuessContainer.innerHTML = '';
            bestGuessContainer.appendChild(bestGuessElement);
            updateBestGuessName();

            bestGuessButton.classList.remove("hidden");
            updateChance()
        }

        function updateBestGuessName() {
            const bestGuessElement = document.getElementById("bestGuessContainer").querySelector("div");
            const bestGuessName = bestGuessElement ? bestGuessElement.textContent.replace("Best Guess: ", "") : "";
            document.getElementById("bestGuessName").textContent = bestGuessName;
            document.getElementById("bestGuessButton").innerHTML = `Click to make <span id="bestGuessName">${bestGuessName}</span> your next guess!`;
        }

        function makeBestGuessNext() {
            if (filteredArtists.length === 0) return;

            const bestGuessElement = document.getElementById("bestGuessContainer").querySelector("div");
            const bestGuessName = bestGuessElement ? bestGuessElement.textContent.replace("Best Guess: ", "") : "";

            if (bestGuessName) {
                displayArtistInfo(bestGuessName);
            }
        }

        function updateChance() {
            const chanceContainer = document.getElementById("chanceContainer");
            const remainingArtists = filteredArtists.length;
            if (remainingArtists > 0) {
                const chance = (1 / remainingArtists) * 100;
                chanceContainer.textContent = `1 in ${remainingArtists} chance (${chance.toFixed(2)}%)`;
            } else {
                chanceContainer.textContent = 'No remaining artists';
            }
        }        

        

        // Function to toggle the sidebar
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
            if (!sidebar.classList.contains('open')) {
                // Wait for the transition to complete before hiding
                setTimeout(() => {
                    sidebar.style.visibility = 'hidden';
                }, 300); // Match the transition duration
            } else {
                sidebar.style.visibility = 'visible';
            }
        }

        function toggleBestGuessVisibility() {
            const isHidden = document.getElementById('hideBestGuessToggle').checked;
            const bestGuessContainer = document.getElementById('bestGuessContainer');
            const bestGuessButton = document.getElementById('bestGuessButton');

            if (isHidden) {
                bestGuessContainer.style.display = 'none';
                bestGuessButton.style.display = 'none';
            } else {
                bestGuessContainer.style.display = '';
                bestGuessButton.style.display = '';
            }

            // Save preference to local storage
            localStorage.setItem('hideBestGuess', isHidden);
        }

        // Check local storage for the toggle state on page load
        document.addEventListener('DOMContentLoaded', () => {
            const isHidden = localStorage.getItem('hideBestGuess') === 'true';
            document.getElementById('hideBestGuessToggle').checked = isHidden;
            toggleBestGuessVisibility();
        });

        function toggleHelpOverlay() {
            const overlay = document.getElementById('helpOverlay');
            const helpButton = document.querySelector('.help-button');
            overlay.classList.toggle('open');
            helpButton.classList.toggle('open');
        }

        function toggleLightMode() {
            const body = document.body;
            body.classList.toggle('light-mode');
            const isLightMode = body.classList.contains('light-mode');
            localStorage.setItem('lightMode', isLightMode);
        }

        function checkLightModePreference() {
            const isLightMode = localStorage.getItem('lightMode') === 'true';
            if (isLightMode) {
                document.body.classList.add('light-mode');
                document.getElementById('lightModeToggle').checked = true;
            }
        }

        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker
                .register('https://catninja58.github.io/SoundmapSolver/service-worker.js')
                .then((registration) => {
                    console.log('Service Worker registered with scope: ', registration.scope);
                })
                .catch((error) => {
                    console.log('Service Worker registration failed: ', error);
                });
            });
        }

        
        // Initialize light mode preference on page load
        document.addEventListener('DOMContentLoaded', checkLightModePreference);

        loadSortedCSV("https://raw.githubusercontent.com/CATninja58/Soundmapsolver/main/SortedFirstGuessResults.csv");
        loadCSV("https://raw.githubusercontent.com/CATninja58/Soundmapsolver/main/MasterArtistList.csv");
        

        window.addEventListener('load', () => {
            fetch('/SoundmapSolver/manifest.json')
            .then(response => {
                if (response.ok) {
                console.log('Manifest found:', response);
                } else {
                console.error('Manifest not found:', response.status);
                }
            })
            .catch(error => {
                console.error('Error fetching manifest:', error);
            });
        });

        
    </script>

</body>
</html>
